# =============================================================================
# AI Hedge Fund India - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control

# =============================================================================
# DATA PROVIDERS
# =============================================================================
# Primary data source: nsepy, yfinance, or hybrid
DATA_PROVIDER=hybrid

# Enable yfinance as fallback when NSEpy fails
ENABLE_YFINANCE_FALLBACK=true

# Data cache TTL in seconds (default: 1200 = 20 minutes)
DATA_CACHE_TTL=1200

# =============================================================================
# LLM CONFIGURATION (for investment narratives)
# =============================================================================
# Enable LLM-powered narratives (true/false)
ENABLE_LLM_NARRATIVES=true

# LLM Provider: gemini, openai, anthropic, or none
LLM_PROVIDER=gemini

# Gemini API Key (free tier: 60 req/min)
# Get yours at: https://makersuite.google.com/app/apikey
GEMINI_API_KEY=your_gemini_api_key_here

# OpenAI API Key (optional, if using GPT-4)
# Get yours at: https://platform.openai.com/api-keys
OPENAI_API_KEY=your_openai_api_key_here

# Anthropic API Key (optional, if using Claude)
# Get yours at: https://console.anthropic.com/
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# LLM timeout in seconds
LLM_TIMEOUT=30

# =============================================================================
# API SETTINGS
# =============================================================================
# API server port
API_PORT=8010

# API host (0.0.0.0 for all interfaces, localhost for local only)
API_HOST=0.0.0.0

# Enable rate limiting
ENABLE_RATE_LIMITING=true

# Rate limit: requests per minute per IP
RATE_LIMIT_PER_MINUTE=100

# CORS allowed origins (comma-separated)
CORS_ORIGINS=http://localhost:5173,http://localhost:5174

# Analysis result cache TTL in seconds (default: 900 = 15 minutes)
ANALYSIS_CACHE_TTL=900

# =============================================================================
# MARKET REGIME DETECTION
# =============================================================================
# Enable adaptive weight adjustment based on market regime
ENABLE_ADAPTIVE_WEIGHTS=true

# Market regime cache duration in hours
REGIME_CACHE_HOURS=6

# Market index for regime detection (^NSEI for NIFTY50, ^BSESN for SENSEX)
MARKET_INDEX=^NSEI

# =============================================================================
# AGENT WEIGHTS (if not using adaptive weights)
# =============================================================================
# Default agent weights (must sum to 1.0)
WEIGHT_FUNDAMENTALS=0.36
WEIGHT_MOMENTUM=0.27
WEIGHT_QUALITY=0.18
WEIGHT_SENTIMENT=0.09
WEIGHT_INSTITUTIONAL_FLOW=0.10

# =============================================================================
# LOGGING
# =============================================================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log file path
LOG_FILE=logs/app.log

# Log format: json or text
LOG_FORMAT=json

# Maximum log file size in MB
LOG_MAX_SIZE_MB=100

# Number of backup log files to keep
LOG_BACKUP_COUNT=10

# =============================================================================
# CIRCUIT BREAKER (for API resilience)
# =============================================================================
# Number of failures before opening circuit
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5

# Recovery timeout in seconds
CIRCUIT_BREAKER_RECOVERY_TIMEOUT=60

# Max calls in half-open state
CIRCUIT_BREAKER_HALF_OPEN_MAX_CALLS=3

# =============================================================================
# PERFORMANCE & CACHING
# =============================================================================
# Maximum number of stocks to cache in memory
MAX_CACHE_SIZE=100

# Enable pre-warming cache on startup with top stocks
ENABLE_CACHE_PREWARMING=true

# Number of top stocks to pre-warm
CACHE_PREWARM_COUNT=10

# =============================================================================
# REDIS (Optional - for distributed caching)
# =============================================================================
# Enable Redis for distributed caching (requires Redis server)
ENABLE_REDIS=false

# Redis connection URL
REDIS_URL=redis://localhost:6379/0

# Redis key prefix
REDIS_KEY_PREFIX=ai_hedge_fund:

# =============================================================================
# MONITORING & OBSERVABILITY (Optional)
# =============================================================================
# Enable Prometheus metrics endpoint
ENABLE_METRICS=false

# Metrics endpoint path
METRICS_PATH=/metrics

# Enable Sentry error tracking
ENABLE_SENTRY=false

# Sentry DSN (get from https://sentry.io)
SENTRY_DSN=your_sentry_dsn_here

# =============================================================================
# HISTORICAL DATA COLLECTION
# =============================================================================
# Enable historical data collection background task
ENABLE_HISTORICAL_COLLECTION=true

# Collection interval in seconds (14400 = 4 hours)
HISTORICAL_COLLECTION_INTERVAL=14400

# Data retention period in days (365 = 1 year)
DATA_RETENTION_DAYS=365

# Database path for historical data
DATABASE_PATH=data/analysis_history.db

# Market hours (IST) for data collection
MARKET_OPEN_HOUR=9
MARKET_OPEN_MINUTE=15
MARKET_CLOSE_HOUR=15
MARKET_CLOSE_MINUTE=30

# =============================================================================
# DEVELOPMENT
# =============================================================================
# Environment: development, staging, production
ENVIRONMENT=development

# Enable debug mode (verbose logging, auto-reload)
DEBUG=true

# Enable API documentation (Swagger UI)
ENABLE_API_DOCS=true
